function initPharmaciesListMap(){function t(){cluster=new ymaps.Clusterer({clusterDisableClickZoom:!1,gridSize:64,clusterIcons:[{href:"img/content/cluster.png",size:[36,53],offset:[-17,-48]}],clusterIconContentLayout:ymaps.templateLayoutFactory.createClass('<div style="font-size: 13px; line-height: 42px; color: #FFFFFF; text-align: center">{{ properties.geoObjects.length }}</div>')}),n.geoObjects.add(cluster)}function e(t,e,i){t.metro&&(metroDiv='<div class="salon-select__metro">'+t.metro+"</div>");var o=$('<a href="#" class="salon-select__item" data-city="'+t.city+'" data-id="'+t.id+'">\t\t\t\t\t\t\t  \t<div class="salon-select__title">'+t.city+", "+t.address+"</div>"+metroDiv+'\t\t\t\t\t\t\t  \t<div class="salon-select__time">'+t.time+"</div>\t\t\t\t\t\t  </a>"),a=ymaps.templateLayoutFactory.createClass('<div class="ph-balloon">\t\t\t\t<div class="label-net">'+t.net+'</div>\t\t\t\t<div class="label-address">'+t.city+", "+t.address+"</div>"+metroDiv+'\t\t\t\t<div class="label-time">'+t.time+'</div>\t\t\t\t<div class="label-phone">'+t.phone+"</div>\t\t\t</div>"),s={balloonContentLayout:a,balloonPanelMaxMapArea:0,iconLayout:"default#image",iconImageHref:t.iconWay,iconImageSize:[36,53],iconImageOffset:[-17,-48],id:t.id},l=new ymaps.Placemark(t.center,{},s);e.add(l),o.appendTo(i).bind("click",function(i){i.preventDefault();var o=l.geometry.getCoordinates(),a=[o[0]-.005,o[1]-.04];e.getGeoObjects();n.balloon.isOpen()&&n.balloon.close(),setTimeout(function(){n.balloon.open(t.center,'<div class="ph-balloon">\t\t\t  \t\t\t<div class="label-net">'+t.net+'</div>\t\t\t\t\t\t<div class="label-address">'+t.city+", "+t.address+'</div>\t\t\t\t\t\t<div class="label-time">'+t.time+'</div>\t\t\t\t\t\t<div class="salon-select__metro">'+t.metro+'</div>\t\t\t\t\t\t<div class="label-phone">'+t.phone+"</div>\t\t\t\t\t</div>",{})},600),n.setCenter(a,13,{checkZoomRange:!0,duration:500}),$(".salon-select__item").removeClass("active"),$("[data-id="+t.id+"]").addClass("active")}),l.events.add("click",function(e){console.log(t.id),$(".salon-select__item").removeClass("active"),$("[data-id="+t.id+"]").addClass("active");var n=$("[data-id="+t.id+"]");$(".salon-select__list").scrollTo(n,{axis:"y",duration:100})})}var n=new ymaps.Map("salon-map",{center:[52.11008,23.670247],zoom:13,controls:[]});list=$(".salon-select__list");for(var i=0;i<cities.length;i++)t(cities[i]);for(var o=0;o<cities.length;o++)e(cities[o],cluster,list);$(window).width()<=1023&&n.setCenter([52.093904,23.70488]),n.events.add("click",function(){n.balloon.close()}),n.controls.add(new ymaps.control.ZoomControl({options:{position:{right:10,top:50}}})),n.behaviors.disable("scrollZoom"),n.setBounds(n.geoObjects.getBounds()),$(window).width()<=767&&n.behaviors.disable("drag"),list.appendTo($(".salon-select"))}$(document).ready(function(){if($("#salon-map").length){ymaps.ready(initPharmaciesListMap);var t=cities.length;$(".salon-select__count span").text(+t)}});